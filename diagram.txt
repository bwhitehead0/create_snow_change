Flow Diagram for `assets/create_snow_change.sh`

1. Start
2. Parse Arguments
  - Usage: `./create_snow_change.sh [options]`
  - Options:
    - `-c` : CI name
    - `-l` : ServiceNow URL
    - `-d` : Description
    - `-s` : Short description
    - `-u` : Username
    - `-p` : Password
    - `-t` : Token
    - `-o` : Timeout (default: 60)
    - `-r` : Response type (full or short, default: short)
3. Validate Arguments
  - Check if required arguments are provided
  - Check if `jq` and `curl` are installed
  - Validate URL
  - Display error message if arguments are invalid
4. Execute Main Function
  - Call `get_ci_sys_id` to get the CI sys_id
  - Call `create_json_payload` to create the JSON payload
  - Call `create_chg` to create the change request

Functions:
1. err()
  - Usage: `err "error message"`  - Description: Outputs an error message to stderr

2. check_application_installed()
  - Usage: `check_application_installed "application_name"`
  - Description: Checks if the specified application is installed

3. url_encode_string()
  - Usage: `url_encode_string "string"`
  - Description: URL encodes the provided string

4. get_ci_sys_id()
  - Usage: `get_ci_sys_id -c "ci_name" -l "sn_url" -u "username" -p "password" -t "token" -o "timeout"`
  - Description: Retrieves the sys_id of the specified CI
  - Steps:
    - Parse arguments
    - Validate required parameters
    - URL encode the CI name
    - Build the API URL
    - Make the API request to get the sys_id
    - Handle the response and extract the sys_id

5. create_json_payload()
  - Usage: `create_json_payload -c "ci_sys_id" -d "description" -s "short_description"`
  - Description: Creates a JSON payload for the change request
  - Steps:
    - Parse arguments
    - Create the JSON payload
    - Validate the JSON payload

6. create_chg()
  - Usage: `create_chg -j "json_payload" -l "sn_url" -u "username" -p "password" -t "token"`
  - Description: Creates a change request in ServiceNow
  - Steps:
    - Parse arguments
    - Build the API URL
    - Make the API request to create the change request
    - Handle the response and output the result

7. main()
  - Usage: `main "$@"`
  - Description: Main function to parse arguments, validate them, and call other functions
  - Steps:
    - Parse arguments
    - Validate required parameters and applications
    - Get the CI sys_id
    - Create the JSON payload
    - Create the change request

8. End